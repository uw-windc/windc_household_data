<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · windc_household_data</title><meta name="title" content="Introduction · windc_household_data"/><meta property="og:title" content="Introduction · windc_household_data"/><meta property="twitter:title" content="Introduction · windc_household_data"/><meta name="description" content="Documentation for windc_household_data."/><meta property="og:description" content="Documentation for windc_household_data."/><meta property="twitter:description" content="Documentation for windc_household_data."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>windc_household_data</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#API-Reference"><span>API Reference</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Introduction</a></li><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/uw-windc/windc_household_data" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/uw-windc/windc_household_data/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h1><p>This package contains method to download the raw CSV data used in the WiNDC.GAMS build stream. </p><p>To add this package to your Julia environment, open the package manager and type:</p><pre><code class="nohighlight hljs">pkg&gt; add https://github.com/uw-windc/windc_household_data</code></pre><p>Download the data is a single function call:</p><pre><code class="language-julia hljs">using windc_household_data

census_api_key = &quot;&lt;census_api_key&gt;&quot;
bea_api_key = &quot;&lt;bea_api_key&gt;&quot;

years = 2000:2023

download_save_data(
    census_api_key, 
    bea_api_key, 
    years, 
    &quot;data/&quot;;
    acs_year = 2020
    )</code></pre><h2 id="API-Reference"><a class="docs-heading-anchor" href="#API-Reference">API Reference</a><a id="API-Reference-1"></a><a class="docs-heading-anchor-permalink" href="#API-Reference" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.acs_commuting-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}" href="#windc_household_data.acs_commuting-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}"><code>windc_household_data.acs_commuting</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">acs_commuting(raw_commuting::DataFrame, wages::DataFrame)</code></pre><p>Compute the commuting data from the ACS data and the wages data.</p><p><strong>Arguments</strong></p><ul><li><code>raw_commuting</code> - The raw commuting data from the ACS, output from  <a href="#windc_household_data.read_commuting_data-Tuple{Any}"><code>read_commuting_data</code></a>.</li><li><code>wages</code> - The wages data from the CPS data, output from <a href="#windc_household_data.cps_wages-Tuple{DataFrames.DataFrame}"><code>cps_wages</code></a>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/commuting.jl#L100-L111">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.clean_cps_data_year-NTuple{4, Any}" href="#windc_household_data.clean_cps_data_year-NTuple{4, Any}"><code>windc_household_data.clean_cps_data_year</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">clean_cps_data_year(year, cps_rw, variables, api_key; states = STATES)</code></pre><p>Download and clean the CPS data for a given year.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/cps.jl#L45-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.cps_count_observations-Tuple{DataFrames.DataFrame}" href="#windc_household_data.cps_count_observations-Tuple{DataFrames.DataFrame}"><code>windc_household_data.cps_count_observations</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cps_count_observations(cps::DataFrame)</code></pre><p>Count the number of observations in the CPS data by household and state.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/cps.jl#L254-L258">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.cps_income-Tuple{DataFrames.DataFrame}" href="#windc_household_data.cps_income-Tuple{DataFrames.DataFrame}"><code>windc_household_data.cps_income</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cps_income(cps::DataFrame)</code></pre><p>Compute the income from the CPS data by variable. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/cps.jl#L206-L210">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.cps_income_shares-Tuple{DataFrames.DataFrame}" href="#windc_household_data.cps_income_shares-Tuple{DataFrames.DataFrame}"><code>windc_household_data.cps_income_shares</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cps_income_shares(cps::DataFrame)</code></pre><p>Compute the income share for by household.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/cps.jl#L239-L243">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.cps_number_households-Tuple{DataFrames.DataFrame}" href="#windc_household_data.cps_number_households-Tuple{DataFrames.DataFrame}"><code>windc_household_data.cps_number_households</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cps_number_households(cps::DataFrame; unit::Real = 1e-6)</code></pre><p>Compute the number of households from the CPS data. This is the sum of the  variable <code>marsupwt</code> for each household and state.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/cps.jl#L223-L228">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.cps_vs_nipa_income_categories-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}" href="#windc_household_data.cps_vs_nipa_income_categories-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}"><code>windc_household_data.cps_vs_nipa_income_categories</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cps_vs_nipa_income_categories(income::DataFrame, api_key::String)</code></pre><p>Return a comparison between CPS and NIPA income categories.</p><p><strong>Arguments</strong></p><ul><li><code>income</code> - A DataFrame with the CPS income data</li><li><code>api_key</code> - Request an API key from the <a href="https://apps.bea.gov/api/signup/">BEA website</a></li></ul><p><strong>Returns</strong></p><p>A DataFrame with the columns <code>year</code>, <code>nipa</code>, <code>cps</code>, <code>pct_diff</code>, and <code>category</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/bea.jl#L57-L70">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.cps_wages-Tuple{DataFrames.DataFrame}" href="#windc_household_data.cps_wages-Tuple{DataFrames.DataFrame}"><code>windc_household_data.cps_wages</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">cps_wages(census_data::DataFrame; year = 2020)</code></pre><p>Compute the wages from the CPS data by state and year.</p><p><strong>Arguments</strong></p><ul><li><code>census_data</code> - The CPS data from the API or a CSV file, output from  <a href="#windc_household_data.load_cps_data_api-Tuple{Any, Any}"><code>load_cps_data_api</code></a>.</li><li><code>year</code> - The year to pull the data for. Default is 2020. The commuting data   is released every 5 years, this is the most recent year or release.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/commuting.jl#L68-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.create_nipa_windc-Tuple{Any, Any}" href="#windc_household_data.create_nipa_windc-Tuple{Any, Any}"><code>windc_household_data.create_nipa_windc</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_nipa_windc(bea_data::DataFrame, type::Symbol)</code></pre><p>Create a DataFrame comparing the WiNDC vs NIPA data. This uses two magic files, <code>ld0_windc.csv</code> and <code>kd0_windc.csv</code> to create the comparison.</p><p><strong>Arguments</strong></p><ul><li><code>bea_data</code> - A DataFrame with the NIPA data</li><li><code>type</code> - Either <code>:labor</code> or <code>:capital</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/bea.jl#L133-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.download_save_data-NTuple{4, Any}" href="#windc_household_data.download_save_data-NTuple{4, Any}"><code>windc_household_data.download_save_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function download_save_data(
    census_api_key, 
    bea_api_key, 
    years,
    output_root_directory; 
    states = STATES,
    acs_file_name = &quot;table1.xlsx&quot;,
    acs_year = 2020
)</code></pre><p>Download and save the raw household data and save it into the correct directory structure.</p><p><strong>Arguments</strong></p><ul><li><code>census_api_key</code> - The Census API key. Request an API key from the <a href="https://api.census.gov/data/key_signup.html">Census website</a></li><li><code>bea_api_key</code> - The BEA API key. Request an API key from the <a href="https://apps.bea.gov/api/signup/">BEA website</a></li><li><code>years</code> - The years to pull data for, as a range 2000:2023</li><li><code>output_root_directory</code> - The directory to save the data</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>states</code> - A DataFrame with the state FIPS and abbreviations. Default is <code>STATES</code>.</li><li><code>acs_file_name</code> - The name of the ACS commuting data file. Default is &quot;table1.xlsx&quot;.</li><li><code>acs_year</code> - The year of the ACS data. Default is 2020.</li></ul><p><strong>Functions Called</strong></p><ul><li><a href="#windc_household_data.load_cps_data_api-Tuple{Any, Any}"><code>load_cps_data_api</code></a></li><li><a href="#windc_household_data.get_bea_nipa_data-Tuple{String, Any}"><code>get_bea_nipa_data</code></a></li><li><a href="#windc_household_data.save_cps_data-Tuple{Any, Any, Any}"><code>save_cps_data</code></a></li><li><a href="#windc_household_data.magic_data_cps-Tuple{Any}"><code>magic_data_cps</code></a></li><li><a href="#windc_household_data.get_cms_data-Tuple{Any}"><code>get_cms_data</code></a></li><li><a href="#windc_household_data.extrapolate_cms_data-Tuple{DataFrames.DataFrame, Any}"><code>extrapolate_cms_data</code></a></li><li><a href="#windc_household_data.get_census_health_data-Tuple{Any, Any}"><code>get_census_health_data</code></a></li><li><a href="#windc_household_data.public_health_benefits-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}"><code>public_health_benefits</code></a></li><li><a href="#windc_household_data.save_public_health_benefits_data-Tuple{DataFrames.DataFrame, Any}"><code>save_public_health_benefits_data</code></a></li><li><a href="#windc_household_data.get_acs_commuting_data-Tuple{Any}"><code>get_acs_commuting_data</code></a></li><li><a href="#windc_household_data.save_acs_commuting_data-Tuple{DataFrames.DataFrame, Any}"><code>save_acs_commuting_data</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/data_exporter.jl#L42-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.extrapolate_cms_data-Tuple{DataFrames.DataFrame, Any}" href="#windc_household_data.extrapolate_cms_data-Tuple{DataFrames.DataFrame, Any}"><code>windc_household_data.extrapolate_cms_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extrapolate_cms_data(cms::DataFrame, years)</code></pre><p>Extrapolate CMS data for each given year. Performs the extrapolation for each state independently.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/health_care.jl#L102-L107">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.extrapolate_cms_data_single_state-Tuple{Any, Any}" href="#windc_household_data.extrapolate_cms_data_single_state-Tuple{Any, Any}"><code>windc_household_data.extrapolate_cms_data_single_state</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">extrapolate_cms_data_single_state(df, years)</code></pre><p>Extrapolate CMS data to years that are not in the data. This uses a linear model to extrapolate the data. Will filter <code>years</code> to be only years not present in data.</p><p><strong>Arguments</strong></p><ul><li><code>df::DataFrame</code>: The CMS data.</li><li><code>years::Vector{Int}</code>: All years needed in final data</li></ul><p><strong>Returns</strong></p><p>A DataFrame with the following columns:</p><ul><li><code>:state::String</code>: The state name.</li><li><code>:year::Int</code>: The year of the data.</li><li><code>:medicare::Float64</code>: The medicare spending.</li><li><code>:medicade::Float64</code>: The medicade spending.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/health_care.jl#L60-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.fetch_commuting_data-Tuple{Any}" href="#windc_household_data.fetch_commuting_data-Tuple{Any}"><code>windc_household_data.fetch_commuting_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fetch_commuting_data(output_directory; year = 2020, file_name = &quot;table1.xlsx&quot;, output_name = file_name)</code></pre><p>Download the commuting data from the Census Bureau website.</p><p><strong>Arguments</strong></p><ul><li><code>output_directory</code> - The directory to save the data.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>year</code> - The year to pull the data for. Default is 2020. The commuting data   is released every 5 years, this is the most recent year or release.</li><li><code>file_name</code> - The name of the file to download. Default is &quot;table1.xlsx&quot;.</li><li><code>output_name</code> - The name of the file to save the data as. Default is the same   as <code>file_name</code>.</li></ul><p><strong>Returns</strong></p><p>The path to the downloaded file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/commuting.jl#L1-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.fetch_zip_data-Tuple{String, Function}" href="#windc_household_data.fetch_zip_data-Tuple{String, Function}"><code>windc_household_data.fetch_zip_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fetch_zip_data(
    url::String,
    filter_function::Function;;
    output_path::String = joinpath(pwd(), &quot;data&quot;),
)</code></pre><p>Download a zip file from a given url and extract the files in the zip file that  are in the <code>data</code> NamedTuple.</p><p>This function will throw an error if not all files in <code>data</code> are extracted.</p><p><strong>Required Arguments</strong></p><ol><li><code>url::String</code>: The url of the zip file to download.</li><li><code>filter_function::Function;</code>: A function that takes a string and returns a boolean.  This function is used to filter the files in the zip file, it should return <code>true</code>   if the file should be extracted and <code>false</code> otherwise.</li></ol><p><strong>Optional Arguments</strong></p><ul><li><code>output_path::String</code>: The path to save the extracted files. Default is the </li></ul><p>directory <code>data</code> in the current working directory. If this is not an absolute path, it will be joined with the current working directory.</p><p><strong>Output</strong></p><p>Returns a vector of the absolute paths to the extracted files.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/download.jl#L1-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.get_acs_commuting_data-Tuple{Any}" href="#windc_household_data.get_acs_commuting_data-Tuple{Any}"><code>windc_household_data.get_acs_commuting_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_acs_commuting_data(census_data; year = 2020, file_name = &quot;table1.xlsx&quot;)</code></pre><p>Download the ACS data and compute the commuting data.</p><p><strong>Arguments</strong></p><ul><li><code>census_data</code> - The CPS data from the API or a CSV file, output from  <a href="#windc_household_data.load_cps_data_api-Tuple{Any, Any}"><code>load_cps_data_api</code></a>.</li></ul><p><strong>Optional Arguments</strong></p><ul><li><code>year</code> - The year to pull the data for. Default is 2020. The commuting data   is released every 5 years, this is the most recent year or release.</li><li><code>file_name</code> - The name of the file to download. Default is &quot;table1.xlsx&quot;.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/commuting.jl#L124-L139">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.get_bea_nipa_data-Tuple{String, Any}" href="#windc_household_data.get_bea_nipa_data-Tuple{String, Any}"><code>windc_household_data.get_bea_nipa_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_bea_nipa_data(bea_key::String, years)</code></pre><p>Get NIPA data from the BEA API for the given years.</p><p><strong>Arguments</strong></p><ul><li><code>bea_key</code> - Request an API key from the <a href="https://apps.bea.gov/api/signup/">BEA website</a></li><li><code>years</code> - The years to pull data for, as a range 2001:2024 -&gt; These are +1 for some reason</li></ul><p><strong>Returns</strong></p><p>A DataFrame with the NIPA data for the given years and columns <code>year</code>,  <code>LineNumber</code>, and <code>nipa</code>.</p><p><strong>API query</strong></p><pre><code class="nohighlight hljs">query = Dict(
    &quot;UserID&quot; =&gt; bea_key,
    &quot;method&quot; =&gt; &quot;GetData&quot;,
    &quot;datasetname&quot; =&gt; &quot;NIPA&quot;,
    &quot;TableName&quot; =&gt; &quot;T20100&quot;,
    &quot;Frequency&quot; =&gt; &quot;A&quot;,
    &quot;Year&quot; =&gt; join(years, &quot;,&quot;),
    &quot;ResultFormat&quot; =&gt; &quot;JSON&quot;
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/bea.jl#L1-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.get_census_health_data-Tuple{Any, Any}" href="#windc_household_data.get_census_health_data-Tuple{Any, Any}"><code>windc_household_data.get_census_health_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_census_health_data(census_api_key, years)</code></pre><p>Get health data from the ACS for multiple years. This function will return the data for all states.</p><p>Retrieves data from the following variables in the ACS 1 year survey:</p><pre><code class="nohighlight hljs">B27015_005
B27015_010
B27015_015
B27015_020
B27015_025</code></pre><p>No data is available for 2020 due to low response rates. We will use the average of 2019 and 2021 data for 2020.</p><p><strong>Arguments</strong></p><ul><li><code>census_api_key::String</code>: The Census API key.</li><li><code>years::Vector{Int}</code>: The years to get the data, will filter to be &gt;= 2009.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/health_care.jl#L161-L182">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.get_census_health_data_year-Tuple{Any, Any, Any}" href="#windc_household_data.get_census_health_data_year-Tuple{Any, Any, Any}"><code>windc_household_data.get_census_health_data_year</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_census_health_data_year(census_api_key, variables, year)</code></pre><p>Get health data from the ACS for a single year. This function will return the data for all states.</p><p>We only want estimated data, not MOE data. Will only return estimates.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/health_care.jl#L113-L120">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.get_cms_data-Tuple{Any}" href="#windc_household_data.get_cms_data-Tuple{Any}"><code>windc_household_data.get_cms_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_cms_data(output;files_to_grab = (medicare = &quot;MEDICARE_AGGREGATE20.CSV&quot;, medicaid = &quot;MEDICAID_AGGREGATE20.CSV&quot;))</code></pre><p>Download and extract CMS a state health expediture by state of residence data. This downloads a <a href="https://www.cms.gov/research-statistics-data-and-systems/statistics-trends-and-reports/nationalhealthexpenddata/downloads/resident-state-estimates.zip">ZIP file from the CMS website</a>.</p><p><strong>Arguments</strong></p><ul><li><code>output::String</code>: The directory to save the data to.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>files_to_grab::Tuple</code>: A tuple of file names to extract from the ZIP file. The keys are the names of the files and the values are the names of the files in the ZIP file.</li></ul><p><strong>Returns</strong></p><p>A DataFrame with the following columns:</p><ul><li><code>:state::String</code>: The state name.</li><li><code>:year::Int</code>: The year of the data.</li><li><code>:medicare::Float64</code>: The medicare spending.</li><li><code>:medicade::Float64</code>: The medicaid spending.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/health_care.jl#L1-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.get_cps_data_api-Tuple{Any, Any, Any}" href="#windc_household_data.get_cps_data_api-Tuple{Any, Any, Any}"><code>windc_household_data.get_cps_data_api</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_cps_data_api(year, vars, api_key)</code></pre><p>Pull the raw data directly from the API</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/cps.jl#L23-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.load_cps_data_api-Tuple{Any, Any}" href="#windc_household_data.load_cps_data_api-Tuple{Any, Any}"><code>windc_household_data.load_cps_data_api</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">load_cps_data_api(api_key, years; states = STATES)</code></pre><p>Load all the CPS data in the given year range. </p><p><strong>Arguments</strong></p><ul><li><code>api_key</code> - Request an API key from the <a href="https://api.census.gov/data/key_signup.html">Census website</a></li><li><code>years</code> - The years to pull data for, as a range 2000:2023</li></ul><p><strong>Keywords</strong></p><ul><li><code>states</code> - A DataFrame with the state FIPS codes and abbreviations (default is <code>STATES</code>)</li></ul><p><strong>Returns</strong></p><p>A dictionary with the following keys:</p><ul><li><code>income</code> - A DataFrame with the income data</li><li><code>shares</code> - A DataFrame with the income shares</li><li><code>count</code> - A DataFrame with the count of households</li><li><code>numhh</code> - A DataFrame with the number of households</li></ul><p><strong>API Call</strong></p><p>There is a split in 2019. </p><table><tr><th style="text-align: right">Common</th><th style="text-align: right">Pre-2019</th><th style="text-align: right">Post-2019</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right">HWSVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">wages and salaries</td></tr><tr><td style="text-align: right">HSEVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">self-employment (nonfarm)</td></tr><tr><td style="text-align: right">HFRVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">self-employment farm</td></tr><tr><td style="text-align: right">HUCVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">unemployment compensation</td></tr><tr><td style="text-align: right">HWCVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">workers compensation</td></tr><tr><td style="text-align: right">HSSVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">social security</td></tr><tr><td style="text-align: right">HSSIVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">supplemental security</td></tr><tr><td style="text-align: right">HPAWVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">public assistance or welfare</td></tr><tr><td style="text-align: right">HVETVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">veterans benefits</td></tr><tr><td style="text-align: right">HSURVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">survivors income</td></tr><tr><td style="text-align: right">HDISVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">disability</td></tr><tr><td style="text-align: right">HINTVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">interest</td></tr><tr><td style="text-align: right">HDIVVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">dividends</td></tr><tr><td style="text-align: right">HRNTVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">rents</td></tr><tr><td style="text-align: right">HEDVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">educational assistance</td></tr><tr><td style="text-align: right">HCSPVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">child support</td></tr><tr><td style="text-align: right">HFINVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">financial assistance</td></tr><tr><td style="text-align: right">HOIVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">other income</td></tr><tr><td style="text-align: right">HTOTVAL</td><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">total household income</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">GESTFIPS</td><td style="text-align: right"></td><td style="text-align: right">state fips</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">A_EXPRRP</td><td style="text-align: right"></td><td style="text-align: right">expanded relationship code</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">H_HHTYPE</td><td style="text-align: right"></td><td style="text-align: right">type of household interview</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">PPPOS</td><td style="text-align: right"></td><td style="text-align: right">person identifier</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">MARSUPWT</td><td style="text-align: right"></td><td style="text-align: right">asec supplement final weight</td></tr><tr><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">HDSTVAL</td><td style="text-align: right">retirement distributions</td></tr><tr><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">HPENVAL</td><td style="text-align: right">pension income</td></tr><tr><td style="text-align: right"></td><td style="text-align: right"></td><td style="text-align: right">HANNVAL</td><td style="text-align: right">annuities</td></tr></table></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/cps.jl#L84-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.magic_data_cex-Tuple{Any}" href="#windc_household_data.magic_data_cex-Tuple{Any}"><code>windc_household_data.magic_data_cex</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">magic_data_cex(output_directory)</code></pre><p>Copy the files from the <code>magic_data</code> directory to the output directory. This copies two files, <code>national_income_elasticities_CEX_2013_2017.csv</code> and <code>windc_pce_map.csv</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/data_exporter.jl#L22-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.magic_data_cps-Tuple{Any}" href="#windc_household_data.magic_data_cps-Tuple{Any}"><code>windc_household_data.magic_data_cps</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">magic_data_cps(output_directory)</code></pre><p>Copy the files from the <code>magic_data</code> directory to the output directory. This copies two files, <code>labor_tax_rates.csv</code> and <code>capital_tax_rates.csv</code> which are created in the <code>SAGE</code> model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/data_exporter.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.public_health_benefits-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}" href="#windc_household_data.public_health_benefits-Tuple{DataFrames.DataFrame, DataFrames.DataFrame}"><code>windc_household_data.public_health_benefits</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">public_health_benefits(cms::DataFrame, acs::DataFrame)</code></pre><p>Calculate the public health benefits from the CMS and ACS data. </p><p><strong>Arguments</strong></p><ul><li><code>cms::DataFrame</code>: The CMS data the result of <a href="#windc_household_data.get_cms_data-Tuple{Any}"><code>get_cms_data</code></a> or <a href="#windc_household_data.extrapolate_cms_data-Tuple{DataFrames.DataFrame, Any}"><code>extrapolate_cms_data</code></a>.</li><li><code>acs::DataFrame</code>: The ACS data the result of <a href="#windc_household_data.get_census_health_data-Tuple{Any, Any}"><code>get_census_health_data</code></a>.</li></ul><p><strong>Returns</strong></p><p>A DataFrame with the following columns:</p><ul><li><code>:state::String</code>: The state name.</li><li><code>:type::String</code>: The income category.</li><li><code>:year::Int</code>: The year of the data.</li><li><code>:income::String</code>: The income category.</li><li><code>:medicare::Float64</code>: The medicare spending.</li><li><code>:medicaid::Float64</code>: The medicaid spending.</li></ul><p><strong>Methodology</strong></p><ol><li>Group the ACS data by state, income category, and year to compute value shares.</li><li>Left join the CMS data to the ACS data.</li><li>Calculate the medicare and medicaid spending by multiplying the value shares   by the medicare and medicaid spending and dividing by 1000.</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/health_care.jl#L236-L263">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.read_commuting_data-Tuple{Any}" href="#windc_household_data.read_commuting_data-Tuple{Any}"><code>windc_household_data.read_commuting_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">read_commuting_data(file_path; states = STATES)</code></pre><p>Read the commuting data from the given file path. Download the commuting data  with the <a href="#windc_household_data.fetch_commuting_data-Tuple{Any}"><code>fetch_commuting_data</code></a> function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/commuting.jl#L38-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.save_acs_commuting_data-Tuple{DataFrames.DataFrame, Any}" href="#windc_household_data.save_acs_commuting_data-Tuple{DataFrames.DataFrame, Any}"><code>windc_household_data.save_acs_commuting_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">save_acs_commuting_data(acs_commuting::DataFrame, output_directory)</code></pre><p>Save the ACS commuting data to the output directory.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/data_exporter.jl#L194-L198">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.save_cps_data-Tuple{Any, Any, Any}" href="#windc_household_data.save_cps_data-Tuple{Any, Any, Any}"><code>windc_household_data.save_cps_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">save_cps_data(census_data, bea_data, output_directory)</code></pre><p>Save the CPS and BEA data to the output directory.</p><p><strong>Arguments</strong></p><ul><li><code>census_data</code> - A DataFrame with the CPS data</li><li><code>bea_data</code> - A DataFrame with the BEA data</li><li><code>output_directory</code> - The directory to save the data</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/data_exporter.jl#L131-L141">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="windc_household_data.save_public_health_benefits_data-Tuple{DataFrames.DataFrame, Any}" href="#windc_household_data.save_public_health_benefits_data-Tuple{DataFrames.DataFrame, Any}"><code>windc_household_data.save_public_health_benefits_data</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">save_public_health_benefits_data(health::DataFrame, output_directory)</code></pre><p>Save the public health benefits data to the output directory.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/uw-windc/windc_household_data/blob/9aac67d1e30b20c956d27daf4048fcf2ad84384a/src/data_exporter.jl#L176-L180">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Wednesday 12 March 2025 18:07">Wednesday 12 March 2025</span>. Using Julia version 1.10.8.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
